<% content_for :javascript do -%>
  <%= javascript_include_tag 'list_view' -%>
  <%= javascript_include_tag 'groups/index' -%>
  <%= javascript_include_tag 'reports/form' -%>
<% end -%>

<% filter %>

<%= messages %>
<div class="groups">
  <div style="float:right">
    <%= button_tag 'Run Report', :class => 'runReport' %>
  </div>

  <div class="buttonsLeft">
    <%= button_to 'Add Group', new_group_path, :method => :get %>
  </div>
  
  <div id="runReportForm" class="massApplyForm reportSettings">
    <%= render :partial => 'reports/group_form', :locals => {:report => Report.new(current_user)} %>
  </div>
  
  <div class="clear spacer"></div>

  <div class="groupList">
    <%= group_list(current_user.groups.of_devices.roots) %>
  </div>
  
  <br/><br/>
  
  <div id="groupsWrapper">
    <%= render :partial => "group", :collection => @groups -%>
  </div>

</div>

<div id="removeGroup" class="dialog">
  <% form_tag groups_path, :method => :delete do -%>
  <% end -%>
  <p>Are you sure you want to remove this group from the system?</p>
</div>
